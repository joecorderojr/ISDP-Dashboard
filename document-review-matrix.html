<div class="panel-title my-5">
  <h4>Document Review Matrix</h4>
</div>
<div class="dashboard-table-container">
  
  <table class="dashboard-table">
      <thead>
          <tr>
            <th class="has-text-left">Unit</th>
            <th class="has-text-centered">Reviewed</th>
            <th class="has-text-centered">For Review</th>
            <th class="has-text-centered">Outdated</th>
            <th class="has-text-centered">Total</th>
            <th class="has-text-centered">% Reviewed</th>
            <th class="has-text-centered">% For Review</th>
            <th class="has-text-centered">% Outdated</th>
          </tr>
        </thead>
        <tbody>

      <? 
      let reviewed = 0;
      let forReview = 0;
      let outdated = 0;
      let total = 0;
      let reviewedPercent = 0;
      
      document_matrix.map(([unitName, unitData]) => { 
        if(unitName) {?>
      
        <tr>
            <td><?=unitName?></td>
            <td class="has-text-centered">
              <?if(unitData["Reviewed"] === 0 || !hasAccessRoleInDocuments) {?>
                <span><?=unitData["Reviewed"]?></span>
              <?} else {?>
                <button type="button" 
                    class="btn btn-link"
                    data-bs-toggle="modal"
                    data-modal-type="document" 
                    data-modal-unit="<?=unitName?>" 
                    data-modal-status="Reviewed"
                    data-bs-target="#modalDocument">
                  <?=unitData["Reviewed"]?>
                  </button>
              <?}?>
            </td>
            <td class="has-text-centered">
              <?if(unitData["For Review"] === 0 || !hasAccessRoleInDocuments) {?>
                <span><?=unitData["For Review"]?></span>
              <?} else {?>
                <button type="button" 
                    class="btn btn-link"
                    data-bs-toggle="modal"
                    data-modal-type="document" 
                    data-modal-unit="<?=unitName?>" 
                    data-modal-status="For Review"
                    data-bs-target="#modalDocument">
                  <?=unitData["For Review"]?>
                  </button>
                
              <?}?>
            </td>
            <td class="has-text-centered">
              <?if(unitData["Outdated"] === 0 || !hasAccessRoleInDocuments) {?>
                <span><?=unitData["Outdated"]?></span>
              <?} else {?>
                <button type="button" 
                    class="btn btn-link"
                    data-bs-toggle="modal"
                    data-modal-type="document" 
                    data-modal-unit="<?=unitName?>" 
                    data-modal-status="Outdated"
                    data-bs-target="#modalDocument">
                  <?=unitData["Outdated"]?>
                  </button>

              <?}?>
            </td>
          <td>
            <?
              if(unitData["Total"] === 0 || !hasAccessRoleInDocuments)
              {
            ?>
               <span><?=unitData["Total"]?></span>
            <? }
            else {
            ?>
            <button type="button" class="btn btn-link" 
                    data-bs-toggle="modal" 
                    data-modal-type="document" 
                    data-modal-unit="<?=unitName?>" 
                    data-modal-status="All" 
                    data-bs-target="#modalDocument">
              <?=unitData["Total"]?>
            </button>

            <?}?>
          </td>
          <td><?=unitData["ReviewedPercentage"]?>%</td>
          <td><?=unitData["For ReviewPercentage"]?>%</td>
          <td><?=unitData["OutdatedPercentage"]?>%</td>

          </tr>
          <? 
         reviewed = reviewed + unitData["Reviewed"];
         forReview = forReview + unitData["For Review"];
         outdated = outdated + unitData["Outdated"];
        }
      });

      total = forReview + outdated + reviewed;
      let forReviewPercent = Math.floor((forReview / total) * 100);
      let outdatedPercent =  Math.floor((outdated / total) * 100);
      reviewedPercent = 100 - forReviewPercent - outdatedPercent;
      ?>
        </tbody>
        <tfoot>
          <tr>
            <th class="has-text-left">Total</th>
            <th class="has-text-centered"><?=reviewed?></th>
            <th class="has-text-centered"><?=forReview?></th>
            <th class="has-text-centered"><?=outdated?></th>
            <th class="has-text-centered"><?=total?></th>
            <th class="has-text-centered"><?=reviewedPercent?>%</th>
            <th class="has-text-centered"><?=forReviewPercent?>%</th>
            <th class="has-text-centered"><?=outdatedPercent?>%</th>
          </tr>
        </tfoot>
      </table>
</div>